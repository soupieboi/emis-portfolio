<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="improved.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <title>Emi's Portfolio</title>
</head>
<body>

    <nav>
        <div class="logo">
            <img src="newlogo.png" alt="Logo">
        </div>
        <div class="burger">
          <div class="line"></div>
          <div class="line"></div>
          <div class="line"></div>
        </div>
        <ul class="dropdown-menu menu">
            <li><a href="home.html">Home</a></li>
            <li><a href="tools.html">Tools</a></li>
            <li><a href="art.html">Art</a></li>
            <li><a href="skills.html">Skills</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="spotifyplayer.html">Spotify</a></li>
        </ul>
    </nav>

    <h1>Spotify Web Playback SDK Quick Start</h1>
    <button id="togglePlay">Pause/Play</button>
    <button id="previousTrack">Previous Track</button>
    <button id="nextTrack">Next Track</button>

    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <script src="main.js"></script>
    <script>
        window.onSpotifyWebPlaybackSDKReady = () => {
        const token = 'BQBazFEsFkq2xvLqyzuf6o6uVRytqeaMkyvzy4mF5zLRYrRcad9HGsf7n6fTI-flOXMsovqfOZEXbLKplf3LitnO6nVbbVRjxoHlY1zEwIkw-GxqS_xVm_EhNND-qkoVhdq-YRCkG8p-9A7qgeZi8enAgV8znEr_ffgfCZ-2XPPxagXJm2ibZ4hVuozYYKkufcXeD8zDJC3P8orhYefhGdb5RFyr';
        const player = new Spotify.Player({
            name: 'Portfolio Emilia',
            getOAuthToken: cb => { cb(token); },
            volume: 0.5
        });

        player.addListener('ready', ({ device_id }) => {
            console.log('Ready with Device ID', device_id);
        });
    
        // Not Ready
        player.addListener('not_ready', ({ device_id }) => {
            console.log('Device ID has gone offline', device_id);
        });
    
        player.addListener('initialization_error', ({ message }) => {
            console.error('Failed to Initialize', message);
        });
    
        player.addListener('authentication_error', ({ message }) => {
            console.error('Failed to authenticate', message);
        });
    
        player.addListener('account_error', ({ message }) => {
            console.error('Failed to validate Spotify account', message);
        });

        player.addListener('player_state_changed', ({
            position,
            duration,
            track_window: { current_track }
        }) => {
            console.log('Currently Playing', current_track);
            console.log('Position in Song', position);
            console.log('Duration of Song', duration);
        });

        //Button functions
        document.getElementById('togglePlay').onclick = function() {
            player.togglePlay();
        };
        document.getElementById('previousTrack').onclick = function() {
            player.previousTrack();
        }
        document.getElementById('nextTrack').onclick = function() {
            player.nextTrack();
        }
    
        player.connect()

    }
    </script>
</body>
</html>
